{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}

<!-- Create Polls -->
<section class="create-section" id="create-section" align="center">
    <h2><strong>Create</strong> Polls</h2>
    <p>Create a poll</p>
    <button class="create-section__button"><a href="{{ url_for('views.create') }}">Create</a></button>
</section>

<!-- Vote polls -->
<section class="vote-section" id="vote-section" align="center">
    <h2><strong>Vote</strong> Polls</h2>
    <p>Vote all existing polls</p>
    <button class="vote-section__button"><a href="{{ url_for('views.vote') }}">Go</a></button>
</section>

<section class="my-polls">
    <h1 align="center">My Polls</h1>
    <!-- Search Bar -->
    <br>
    <div class="search-bar">
        <input type="text" class="search-input" id="pollSearch" placeholder="Search my polls...">
        <button  class="search__btn">Search</button>
        <!-- Clear Filter Button -->
        <button class="clear-filter__btn">Clear Filter</button>
    </div>
    <br>
    <!-- Display Polls -->
        {% for poll in user.polls %}
        <div class="whole-poll">
            <div class="information">
                <h3><strong>{{ poll.title }}</strong></h3>
                <h4>{{ poll.description }}</h4>
            </div>
            
            <div class="poll">
                <div class="question">
                    {{ poll.question }}
                    <button type="button" class="close" onclick="deletePoll('{{ poll.id }}')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                
                <div class="answers">
                    <div class="answer" name="option_1" id="answer-0">
                        {{ poll.option_1 }}
                        <span class="percentage_bar"></span>
                        <span class="percentage_value"></span>
                    </div>
                    <div class="answer" name="option_2" id="answer-1">
                        {{ poll.option_2 }}
                        <span class="percentage_bar"></span>
                        <span class="percentage_value"></span>
                    </div>
                    {% if poll.option_3 %}
                    <div class="answer" name="option_3" id="answer-2">
                        {{ poll.option_3 }}
                        <span class="percentage_bar"></span>
                        <span class="percentage_value"></span>
                    </div>
                    {% endif %}
                    {% if poll.option_4 %}
                    <div class="answer" name="option_4" id="answer-3">
                        {{ poll.option_4 }}
                        <span class="percentage_bar"></span>
                        <span class="percentage_value"></span>
                    </div>
                    {% endif %}
                </div>
                <div class="poll-info">
                    <p>Total Votes: 0</p>
                </div>  
            </div>
        </div>
        {% endfor %}
</section>
{% endblock %}